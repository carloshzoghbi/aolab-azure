{
	"info": {
		"_postman_id": "4961bb3b-437b-4124-98e7-f37b194d4b23",
		"name": "A&O Latam - Azure",
		"description": "Coleccion de GoSmarter v2",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
	},
	"item": [
		{
			"name": "Lab 1 - Auth & Initial Settings",
			"item": [
				{
					"name": "Step 1: Retrieve Authentication Token BIGIP",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "766bb157-29e5-4539-9cd6-01b6b08ab5cb",
								"exec": [
									"eval(postman.getGlobalVariable(\"_f5_workflow_functions\"));",
									"",
									"var populate_vars = [",
									"        {name:\"bigip_1_auth_token\", value:\"token.token\"}",
									"    ];",
									"    ",
									"f5_populate_env_vars(populate_vars);",
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"username\":\"{{bigip_admin_user}}\",\n    \"password\":\"{{bigip_admin_password}}\",\n    \"loginProviderName\":\"tmos\"\n}",
							"options": {
								"raw": {}
							}
						},
						"url": {
							"raw": "https://{{bigip1}}:{{mgmt_port}}/mgmt/shared/authn/login",
							"protocol": "https",
							"host": [
								"{{bigip1}}"
							],
							"port": "{{mgmt_port}}",
							"path": [
								"mgmt",
								"shared",
								"authn",
								"login"
							]
						}
					},
					"response": []
				},
				{
					"name": "Step 2: Set Authentication Token Timeout BIGIP",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "85b2f12c-366b-42d6-93c1-ce808473ddbc",
								"exec": [
									"eval(postman.getGlobalVariable(\"_f5_workflow_functions\"));",
									"",
									"var check_vals = [",
									"        { ",
									"            \"path\":\"timeout\", ",
									"            \"value\":\"36000\" ",
									"        }",
									"    ];",
									"",
									"f5_check_response(check_vals);",
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "PATCH",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "X-F5-Auth-Token",
								"value": "{{bigip_1_auth_token}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"timeout\":\"36000\"\n}",
							"options": {
								"raw": {}
							}
						},
						"url": {
							"raw": "https://{{bigip1}}:{{mgmt_port}}/mgmt/shared/authz/tokens/{{bigip_1_auth_token}}",
							"protocol": "https",
							"host": [
								"{{bigip1}}"
							],
							"port": "{{mgmt_port}}",
							"path": [
								"mgmt",
								"shared",
								"authz",
								"tokens",
								"{{bigip_1_auth_token}}"
							]
						}
					},
					"response": []
				},
				{
					"name": "Step 3: Get Installed iControl LX Extensions",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "5e098299-9d1c-4d54-b189-b8d35751507c",
								"exec": [
									"eval(postman.getGlobalVariable(\"_f5_workflow_functions\"));",
									"",
									"var check_vals = [",
									"        { ",
									"            \"path\":\"kind\",",
									"            \"value\":\"shared:iapp:installed-packages:installedpackagecollectionstate\",",
									"        }       ",
									"    ];",
									"",
									"f5_check_response(check_vals);",
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "X-F5-Auth-Token",
								"value": "{{bigip_1_auth_token}}",
								"type": "text"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"url": {
							"raw": "https://{{bigip1}}:{{mgmt_port}}/mgmt/shared/iapp/installed-packages",
							"protocol": "https",
							"host": [
								"{{bigip1}}"
							],
							"port": "{{mgmt_port}}",
							"path": [
								"mgmt",
								"shared",
								"iapp",
								"installed-packages"
							]
						}
					},
					"response": []
				}
			],
			"protocolProfileBehavior": {}
		},
		{
			"name": "Lab 2 - Declarative Onboarding (DO)",
			"item": [
				{
					"name": "Step 1: Check DO (Pre)",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "3b4db4b9-dfce-4bea-bf68-edb4868f5512",
								"exec": [
									"eval(postman.getGlobalVariable(\"_f5_workflow_functions\"));",
									"",
									"var check_vals = [",
									"        { ",
									"            \"path\":\"declaration\"",
									"        }       ",
									"    ];",
									"",
									"f5_check_response(check_vals);",
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "X-F5-Auth-Token",
								"value": "{{bigip_1_auth_token}}"
							},
							{
								"key": "Connection",
								"value": "keep-alive"
							}
						],
						"url": {
							"raw": "https://{{bigip1}}:{{mgmt_port}}/mgmt/shared/declarative-onboarding/",
							"protocol": "https",
							"host": [
								"{{bigip1}}"
							],
							"port": "{{mgmt_port}}",
							"path": [
								"mgmt",
								"shared",
								"declarative-onboarding",
								""
							]
						}
					},
					"response": []
				},
				{
					"name": "Step 2: DO Declaration",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "5ed27c97-310f-4678-9da3-f26e87ce04b8",
								"exec": [
									""
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"id": "aff3e518-a399-4594-af53-50b945e8142d",
								"exec": [
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"name": "Content-Type",
								"value": "application/json",
								"type": "text"
							},
							{
								"key": "X-F5-Auth-Token",
								"value": "{{bigip_1_auth_token}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\r\n    \"schemaVersion\": \"1.0.0\",\r\n    \"class\": \"Device\",\r\n    \"async\": true,\r\n    \"label\": \"Onboard BIG-IP standalone 2nic\",\r\n    \"Common\": {\r\n        \"class\": \"Tenant\",\r\n        \"hostname\": \"f5demo.example.com\",\r\n        \"dbVars\": {\r\n            \"class\": \"DbVariables\",\r\n            \"ui.advisory.enabled\": true,\r\n            \"ui.advisory.color\": \"green\",\r\n            \"ui.advisory.text\": \"/Common/hostname\",\r\n            \"config.allow.rfc3927\": \"enable\"\r\n        },\r\n        \"myDns\": {\r\n            \"class\": \"DNS\",\r\n            \"nameServers\": [\r\n                \"8.8.8.8\",\r\n                \"4.4.4.4\"\r\n            ],\r\n            \"search\": [\r\n                \"f5.com\"\r\n            ]\r\n        },\r\n        \"myNtp\": {\r\n            \"class\": \"NTP\",\r\n            \"servers\": [\r\n                \"0.pool.ntp.org\",\r\n                \"1.pool.ntp.org\",\r\n                \"2.pool.ntp.org\"\r\n            ],\r\n            \"timezone\": \"UTC\"\r\n        },\r\n        \"myProvisioning\": {\r\n            \"class\": \"Provision\",\r\n            \"ltm\": \"nominal\",\r\n            \"asm\": \"nominal\"\r\n        },\r\n        \"admin\": {\r\n            \"class\": \"User\",\r\n            \"userType\": \"regular\",\r\n            \"password\": \"f4DEMOs4uLATAM\",\r\n            \"shell\": \"bash\"\r\n        },\r\n        \"anotherUser\": {\r\n            \"class\": \"User\",\r\n            \"userType\": \"regular\",\r\n            \"password\": \"f4DEMOs4uLATAM\",\r\n            \"shell\": \"none\",\r\n            \"partitionAccess\": {\r\n                \"all-partitions\": {\r\n                    \"role\": \"guest\"\r\n                }\r\n            }\r\n        },        \r\n        \"external\": {\r\n            \"class\": \"VLAN\",\r\n            \"tag\": 4094,\r\n            \"mtu\": 1500,\r\n            \"interfaces\": [\r\n                {\r\n                    \"name\": \"1.1\",\r\n                    \"tagged\": false\r\n                }\r\n            ]\r\n        },\r\n        \"external-localself\": {\r\n            \"class\": \"SelfIp\",\r\n            \"address\": \"10.1.10.245/24\",\r\n            \"vlan\": \"external\",\r\n            \"allowService\": \"default\",\r\n            \"trafficGroup\": \"traffic-group-local-only\"\r\n        },\r\n        \"default\": {\r\n            \"class\": \"Route\",\r\n            \"gw\": \"10.1.10.1\",\r\n            \"network\": \"default\",\r\n            \"mtu\": 1500\r\n        }\r\n    }\r\n}\r\n"
						},
						"url": {
							"raw": "https://{{bigip1}}/mgmt/shared/declarative-onboarding",
							"protocol": "https",
							"host": [
								"{{bigip1}}"
							],
							"path": [
								"mgmt",
								"shared",
								"declarative-onboarding"
							]
						}
					},
					"response": []
				},
				{
					"name": "Step 3: Check DO (Post)",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "ac76047c-29c0-457a-a4c7-64ad72902a59",
								"exec": [
									"eval(postman.getGlobalVariable(\"_f5_workflow_functions\"));",
									"",
									"var check_vals = [",
									"        { ",
									"            \"path\":\"declaration\"",
									"        }       ",
									"    ];",
									"",
									"f5_check_response(check_vals);",
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "X-F5-Auth-Token",
								"value": "{{bigip_1_auth_token}}"
							},
							{
								"key": "Connection",
								"value": "keep-alive"
							}
						],
						"url": {
							"raw": "https://{{bigip1}}:{{mgmt_port}}/mgmt/shared/declarative-onboarding/",
							"protocol": "https",
							"host": [
								"{{bigip1}}"
							],
							"port": "{{mgmt_port}}",
							"path": [
								"mgmt",
								"shared",
								"declarative-onboarding",
								""
							]
						}
					},
					"response": []
				}
			],
			"protocolProfileBehavior": {}
		},
		{
			"name": "Lab 3 - Application Services 3 (AS3)",
			"item": [
				{
					"name": "Step 1: Get AS3 Version Info",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "72146941-5edf-430b-b687-8e6c3e0b5ecd",
								"exec": [
									"eval(postman.getGlobalVariable(\"_f5_workflow_functions\"));",
									"",
									"var check_vals = [",
									"        { ",
									"            \"path\":\"version\",",
									"            \"value\":\"/^3./i\",",
									"            \"op\":\"regex\"",
									"        }       ",
									"    ];",
									"",
									"f5_check_response(check_vals);",
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "X-F5-Auth-Token",
								"value": "{{bigip_1_auth_token}}"
							},
							{
								"key": "Connection",
								"value": "keep-alive"
							}
						],
						"url": {
							"raw": "https://{{bigip1}}:{{mgmt_port}}/mgmt/shared/appsvcs/info",
							"protocol": "https",
							"host": [
								"{{bigip1}}"
							],
							"port": "{{mgmt_port}}",
							"path": [
								"mgmt",
								"shared",
								"appsvcs",
								"info"
							]
						}
					},
					"response": []
				},
				{
					"name": "Step 2a: AS3 - Simple HTTP App",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "a4da1ae5-cea8-48aa-b803-b45a0086508a",
								"exec": [
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "X-F5-Auth-Token",
								"value": "{{bigip_1_auth_token}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\r\n    \"class\": \"AS3\",\r\n    \"action\": \"deploy\",\r\n    \"persist\": true,\r\n    \"declaration\": {\r\n        \"class\": \"ADC\",\r\n        \"schemaVersion\": \"3.10.0\",\r\n        \"id\": \"lmnop12345\",\r\n        \"label\": \"GoSmarter\",\r\n        \"remark\": \"An HTTP application\",\r\n        \"controls\": {\r\n            \"trace\": true\r\n        },\r\n        \"ACME_tenant_01\": {\r\n            \"class\": \"Tenant\",\r\n            \"Application1\": {\r\n                \"class\": \"Application\",\r\n                \"template\": \"generic\",                \r\n                \"vs_App1_tenant1\": {\r\n                    \"class\": \"Service_HTTP\",\r\n                    \"virtualAddresses\": [\r\n                        \"10.1.10.246\"\r\n                    ],\r\n                    \"pool\": \"pool_app_tenant1\",\r\n                    \"virtualPort\": 8083,\r\n                    \"shareAddresses\": true\r\n                },\r\n                \"pool_app_tenant1\": {\r\n                    \"class\": \"Pool\",\r\n                    \"monitors\": [\r\n                        \"http\",\r\n                        \"tcp\"\r\n                    ],\r\n                    \"members\": [\r\n                        {\r\n                            \"servicePort\": 8083,\r\n                            \"serverAddresses\": [\r\n                                \"10.1.10.80\"\r\n                            ],\r\n                            \"shareNodes\": true\r\n                        }\r\n                    ]\r\n                }\r\n            }\r\n        }\r\n    }\r\n}",
							"options": {
								"raw": {}
							}
						},
						"url": {
							"raw": "https://{{bigip1}}:{{mgmt_port}}/mgmt/shared/appsvcs/declare",
							"protocol": "https",
							"host": [
								"{{bigip1}}"
							],
							"port": "{{mgmt_port}}",
							"path": [
								"mgmt",
								"shared",
								"appsvcs",
								"declare"
							]
						}
					},
					"response": []
				},
				{
					"name": "Step 2b: PATCH to Modify Simple HTTP App",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "a5278280-d8b1-4192-a6f5-3caaf71c38f0",
								"exec": [
									"eval(postman.getGlobalVariable(\"_f5_workflow_functions\"));",
									"",
									"var check_vals = [",
									"        { ",
									"            \"path\":\"results.0.message\",",
									"            \"value\":\"/success|no\\ change/\",",
									"            \"op\":\"regex\"",
									"        }",
									"    ];",
									"",
									"f5_check_response(check_vals);"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "PATCH",
						"header": [
							{
								"key": "X-F5-Auth-Token",
								"value": "{{bigip_1_auth_token}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "[\n  {\n    \"op\":\"add\",\n    \"path\":\"ACME_tenant_01/Application1/pool_app_tenant1/members/1\",\n    \"value\": {\n          \"servicePort\": 8083,\n            \"serverAddresses\": [\n              \"10.1.10.81\"\n            ]\n        }\n  }  \n]",
							"options": {
								"raw": {}
							}
						},
						"url": {
							"raw": "https://{{bigip1}}:{{mgmt_port}}/mgmt/shared/appsvcs/declare",
							"protocol": "https",
							"host": [
								"{{bigip1}}"
							],
							"port": "{{mgmt_port}}",
							"path": [
								"mgmt",
								"shared",
								"appsvcs",
								"declare"
							]
						}
					},
					"response": []
				},
				{
					"name": "Step 2c: Remove Tenant",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "a4da1ae5-cea8-48aa-b803-b45a0086508a",
								"exec": [
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "X-F5-Auth-Token",
								"value": "{{bigip_1_auth_token}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\r\n    \"class\": \"AS3\",\r\n    \"action\": \"deploy\",\r\n    \"persist\": true,\r\n    \"declaration\": {\r\n        \"class\": \"ADC\",\r\n        \"schemaVersion\": \"3.10.0\",\r\n        \"id\": \"lmnop12345\",\r\n        \"label\": \"GoSmarter\",\r\n        \"remark\": \"An HTTP and an HTTPS application\",\r\n        \"controls\": {\r\n            \"trace\": true\r\n        },\r\n        \"ACME_tenant_01\": {\r\n            \"class\": \"Tenant\"\r\n        }\r\n    }\r\n}",
							"options": {
								"raw": {}
							}
						},
						"url": {
							"raw": "https://{{bigip1}}:{{mgmt_port}}/mgmt/shared/appsvcs/declare",
							"protocol": "https",
							"host": [
								"{{bigip1}}"
							],
							"port": "{{mgmt_port}}",
							"path": [
								"mgmt",
								"shared",
								"appsvcs",
								"declare"
							]
						}
					},
					"response": []
				},
				{
					"name": "Step 3a: AS3 - Generic HTTP & TCP Apps",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "a4da1ae5-cea8-48aa-b803-b45a0086508a",
								"exec": [
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "X-F5-Auth-Token",
								"value": "{{bigip_1_auth_token}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"class\": \"AS3\",\n    \"action\": \"deploy\",\n    \"persist\": true,\n    \"declaration\": {\n       \"class\": \"ADC\",\n       \"schemaVersion\": \"3.0.0\",\n       \"id\": \"lmnop23456\",\n       \"label\": \"GoSmarter\",\n       \"remark\": \"Generic HTTP applications\",\n       \"ACME_tenant_02\": {\n          \"class\": \"Tenant\",\n          \"Application2_http\": {\n             \"class\": \"Application\",\n             \"template\": \"generic\",\n             \"vs_App_http_tenant2\": {\n                \"class\": \"Service_HTTP\",\n                \"virtualAddresses\": [\n                   \"10.1.10.246\"\n                ],\n                \"pool\": \"pool_app_tenant2\",\n                \"virtualPort\": 8082,\n                \"shareAddresses\": true\n             },\n             \"pool_app_tenant2\": {\n                \"class\": \"Pool\",\n                \"monitors\": [\n                   \"http\",\n                   \"tcp\"\n                ],\n                \"members\": [{\n                   \"servicePort\": 8082,\n                   \"serverAddresses\": [\n                      \"10.1.10.80\"\n                   ],\n                   \"shareNodes\": true\n                }]\n             }\n          },\n          \"Application2_tcp\": {\n            \"class\": \"Application\",\n            \"template\": \"generic\",\n            \"vs_App_tcp_tenant2\": {\n               \"class\": \"Service_TCP\",\n               \"virtualAddresses\": [\n                  \"10.1.10.246\"\n               ],\n               \"pool\": \"tcp_pool_tenant2\",\n               \"virtualPort\": 22,\n               \"shareAddresses\": true\n            },\n            \"tcp_pool_tenant2\": {\n               \"class\": \"Pool\",\n               \"monitors\": [\n                  \"tcp\"\n               ],\n               \"members\": [{\n                  \"servicePort\": 22,\n                  \"serverAddresses\": [\n                     \"10.1.10.80\"\n                  ],\n                  \"shareNodes\": true\n               }]\n            }\n         }\n       }\n    }\n}",
							"options": {
								"raw": {}
							}
						},
						"url": {
							"raw": "https://{{bigip1}}:{{mgmt_port}}/mgmt/shared/appsvcs/declare",
							"protocol": "https",
							"host": [
								"{{bigip1}}"
							],
							"port": "{{mgmt_port}}",
							"path": [
								"mgmt",
								"shared",
								"appsvcs",
								"declare"
							]
						}
					},
					"response": []
				},
				{
					"name": "Step 3b: Remove Tenant",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "a4da1ae5-cea8-48aa-b803-b45a0086508a",
								"exec": [
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "X-F5-Auth-Token",
								"value": "{{bigip_1_auth_token}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\r\n    \"class\": \"AS3\",\r\n    \"action\": \"deploy\",\r\n    \"persist\": true,\r\n    \"declaration\": {\r\n        \"class\": \"ADC\",\r\n        \"schemaVersion\": \"3.10.0\",\r\n        \"id\": \"lmnop12345\",\r\n        \"label\": \"GoSmarter\",\r\n        \"remark\": \"An HTTP and an HTTPS application\",\r\n        \"controls\": {\r\n            \"trace\": true\r\n        },\r\n        \"ACME_tenant_02\": {\r\n            \"class\": \"Tenant\"\r\n        }\r\n    }\r\n}",
							"options": {
								"raw": {}
							}
						},
						"url": {
							"raw": "https://{{bigip1}}:{{mgmt_port}}/mgmt/shared/appsvcs/declare",
							"protocol": "https",
							"host": [
								"{{bigip1}}"
							],
							"port": "{{mgmt_port}}",
							"path": [
								"mgmt",
								"shared",
								"appsvcs",
								"declare"
							]
						}
					},
					"response": []
				},
				{
					"name": "Step 4a: AS3 - HTTPS App existing SSL Cert, SSL Offload",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "a4da1ae5-cea8-48aa-b803-b45a0086508a",
								"exec": [
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "X-F5-Auth-Token",
								"value": "{{bigip_1_auth_token}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"class\": \"AS3\",\n    \"action\": \"deploy\",\n    \"persist\": true,\n    \"declaration\": {\n        \"class\": \"ADC\",\n        \"schemaVersion\": \"3.10.0\",\n        \"id\": \"lmnop34567\",\n        \"label\": \"GoSmarter\",\n        \"remark\": \"HTTPS application, SSL OFfload using existing certificate\",\n        \"controls\": {\n            \"trace\": true\n        },\n        \"ACME_tenant_03\": {\n            \"class\": \"Tenant\",\n            \"Application3_ssl_offload\": {\n                \"class\": \"Application\",\n                \"template\": \"generic\",\n                \"vs_SSL_Offload\": {\n                    \"class\": \"Service_HTTPS\",\n                    \"virtualAddresses\": [\n                        \"10.1.10.246\"\n                    ],\n                    \"pool\": \"pool_http_offload_tenant3\",\n                    \"virtualPort\": 8443,\n                    \"shareAddresses\": true,\n                    \"redirect80\": false,\n                    \"serverTLS\": \"frontside\"\n                },\n                \"pool_http_offload_tenant3\": {\n                    \"class\": \"Pool\",\n                    \"monitors\": [\n                        \"http\",\n                        \"tcp\"\n                    ],\n                    \"members\": [\n                        {\n                            \"servicePort\": 8080,\n                            \"serverAddresses\": [\n                                \"10.1.10.80\"\n                            ],\n                            \"shareNodes\": true\n                        }\n                    ]\n                },\n\t\t\t\t\"frontside\": {\n\t\t\t\t\t\"class\": \"TLS_Server\",\n                    \"label\": \"simplest decl requires just cert\",\n\t\t\t\t\t\"certificates\": [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\"certificate\": \"webcert\"\n\t\t\t\t\t\t}\n\t\t\t\t\t\t]\n\t\t\t\t},\n                \"webcert\": {\n                    \"class\": \"Certificate\",\n                    \"remark\": \"Existing Certificate\",\n                    \"certificate\": {\"bigip\":\"/Common/default.crt\"},\n                    \"privateKey\": {\"bigip\":\"/Common/default.key\"}\n                }\n            }\n        }\n    }\n}",
							"options": {
								"raw": {}
							}
						},
						"url": {
							"raw": "https://{{bigip1}}:{{mgmt_port}}/mgmt/shared/appsvcs/declare",
							"protocol": "https",
							"host": [
								"{{bigip1}}"
							],
							"port": "{{mgmt_port}}",
							"path": [
								"mgmt",
								"shared",
								"appsvcs",
								"declare"
							]
						}
					},
					"response": []
				},
				{
					"name": "Step 4b: Remove Tenant",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "a4da1ae5-cea8-48aa-b803-b45a0086508a",
								"exec": [
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "X-F5-Auth-Token",
								"value": "{{bigip_1_auth_token}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\r\n    \"class\": \"AS3\",\r\n    \"action\": \"deploy\",\r\n    \"persist\": true,\r\n    \"declaration\": {\r\n        \"class\": \"ADC\",\r\n        \"schemaVersion\": \"3.10.0\",\r\n        \"id\": \"lmnop12345\",\r\n        \"label\": \"GoSmarter\",\r\n        \"remark\": \"An HTTP and an HTTPS application\",\r\n        \"controls\": {\r\n            \"trace\": true\r\n        },\r\n        \"ACME_tenant_03\": {\r\n            \"class\": \"Tenant\"\r\n        }\r\n    }\r\n}",
							"options": {
								"raw": {}
							}
						},
						"url": {
							"raw": "https://{{bigip1}}:{{mgmt_port}}/mgmt/shared/appsvcs/declare",
							"protocol": "https",
							"host": [
								"{{bigip1}}"
							],
							"port": "{{mgmt_port}}",
							"path": [
								"mgmt",
								"shared",
								"appsvcs",
								"declare"
							]
						}
					},
					"response": []
				},
				{
					"name": "Step 5a: AS3 - HTTPS App + SSL Cert + Decl WAF Policy",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "a4da1ae5-cea8-48aa-b803-b45a0086508a",
								"exec": [
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "X-F5-Auth-Token",
								"value": "{{bigip_1_auth_token}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\r\n    \"class\": \"AS3\",\r\n    \"action\": \"deploy\",\r\n    \"persist\": true,\r\n    \"declaration\": {\r\n        \"class\": \"ADC\",\r\n        \"schemaVersion\": \"3.10.0\",\r\n        \"id\": \"lmnop45678\",\r\n        \"label\": \"GoSmarter\",\r\n        \"remark\": \"HTTPS application with Declarative WAF Policy\",\r\n        \"controls\": {\r\n            \"trace\": true\r\n        },\r\n        \"ACME_tenant_04\": {\r\n            \"class\": \"Tenant\",\r\n            \"Application_04\": {\r\n                \"class\": \"Application\",\r\n                \"template\": \"generic\",\r\n                \"vs_https_waf\": {\r\n                    \"class\": \"Service_HTTPS\",\r\n                    \"virtualAddresses\": [\r\n                        \"10.1.10.246\"\r\n                    ],\r\n                    \"shareAddresses\": true,\r\n                    \"redirect80\": false,\r\n                    \"pool\": \"appsec_pool\",\r\n                    \"clientTLS\": \"backside_appsec\",\r\n                    \"serverTLS\": \"frontside_appsec\",\r\n                    \"virtualPort\": 443,\r\n                    \"securityLogProfiles\": [\r\n                    \t{\r\n                    \t\t\"bigip\": \"/Common/Log all requests\"\r\n                    \t}\r\n                    ],\r\n                    \"policyWAF\": {\r\n                    \t\"use\": \"AcmeWAF\"\r\n                    }                    \r\n                },\r\n                \"appsec_pool\": {\r\n                    \"class\": \"Pool\",\r\n                    \"monitors\": [\r\n                        \"http\"\r\n                    ],\r\n                    \"members\": [\r\n                        {\r\n                            \"servicePort\": 8443,\r\n                            \"serverAddresses\": [\r\n                                \"10.1.10.80\"\r\n                            ],\r\n                            \"shareNodes\": true\r\n                        }\r\n                    ]\r\n                },\r\n                \"AcmeWAF\": {\r\n                \t\"class\": \"WAF_Policy\",\r\n                \t\"url\": \"https://raw.githubusercontent.com/cavalen/aolab-azure/master/files/waf_policy.json\",\r\n                \t\"ignoreChanges\": true\r\n                },\r\n\t\t\t\t\"frontside_appsec\": {\r\n\t\t\t\t\t\"class\": \"TLS_Server\",\r\n                    \"label\": \"simplest decl requires just cert\",\r\n\t\t\t\t\t\"certificates\": [\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\"certificate\": \"webcert_appsec\"\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t]\r\n\t\t\t\t},\r\n                \"backside_appsec\": {\r\n                    \"class\": \"TLS_Client\",\r\n                    \"label\": \"simplest decl requires just cert\",\r\n                     \"clientCertificate\": \"webcert_appsec\"\r\n                },\r\n                \"webcert_appsec\": {\r\n                    \"class\": \"Certificate\",\r\n                    \"remark\": \"in practice we recommend using a passphrase\",\r\n                    \"certificate\": \"-----BEGIN CERTIFICATE-----\\nMIIDIjCCAgqgAwIBAgIEEZ+6iTANBgkqhkiG9w0BAQsFADBTMQswCQYDVQQGEwJV\\nUzEUMBIGA1UEChMLRjUgTmV0d29ya3MxEjAQBgNVBAsTCUdvU21hcnRlcjEaMBgG\\nA1UEAxMRd2ViYXBwLmY1ZGVtby5jb20wHhcNMTkwNTE2MTMzMDQ5WhcNMjEwNTE1\\nMTMzMDQ5WjBTMQswCQYDVQQGEwJVUzEUMBIGA1UEChMLRjUgTmV0d29ya3MxEjAQ\\nBgNVBAsTCUdvU21hcnRlcjEaMBgGA1UEAxMRd2ViYXBwLmY1ZGVtby5jb20wggEi\\nMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQCzZcc48eMRCrI5QIOprcAInNGH\\nlBMSJACKTSGAaFBLXdzrqdkZC28zpDl7KfbplyNF1rGnkvZPbtPAD1mM39te81fe\\nFpz4cfIE5V+RUiufWnmS5Q/T5I2ct7VMLFJ51DTj6MR3ahA3ePwE1OW4OzNmMEDz\\noZr6u4WFlhh732Nm9vBJfxStULnqVx3Lga0J1GCW5aYMRBxXrU2+U4Tiv+6okTkR\\nMgFjeVmT70GHpvVxllDjibreBlRbrh45LTLvpTLPzteXV2zT3AWohQSN8BjamF2T\\nMwwSzdHEZRPry3b8yVVUgnCnDiatxtEy1uJlvBzN204FiZpWYxwDrkcRYVB7AgMB\\nAAEwDQYJKoZIhvcNAQELBQADggEBABG/4P+e/Tktlqj6sZP301SWv8zHrgx5iqHO\\nqQcud5ZdvepwpS2naXNK9TkarzYrmvt5MZEOg/pUhUkJaKYz1PlM4Hyt+Dpq0pAm\\nLQs8bKZ6n+rr3g3QnnVUXAwjnS37cg8+WdxJuqrhtTDGqutqePhodW6rX4I4ovW/\\n9CP1ffq0e1NVKPzhsXJkXSFv0uJX7nC7PdFFcwHYUnKmYZdWkIcY9SRvToayX8Sd\\nWKjAczPbt56cdZIVRMOpC+GKQaVc01uiCBhD5WlVCKZxR75BD6ulKQ540WnzDxKE\\nOsK93ESA8qcWZblWSuxbPObMaQfYbVzVmSfxGvsKZGktdq6geNo=\\n-----END CERTIFICATE-----\",\r\n                    \"privateKey\": \"-----BEGIN PRIVATE KEY-----\\nMIIEvgIBADANBgkqhkiG9w0BAQEFAASCBKgwggSkAgEAAoIBAQCzZcc48eMRCrI5\\nQIOprcAInNGHlBMSJACKTSGAaFBLXdzrqdkZC28zpDl7KfbplyNF1rGnkvZPbtPA\\nD1mM39te81feFpz4cfIE5V+RUiufWnmS5Q/T5I2ct7VMLFJ51DTj6MR3ahA3ePwE\\n1OW4OzNmMEDzoZr6u4WFlhh732Nm9vBJfxStULnqVx3Lga0J1GCW5aYMRBxXrU2+\\nU4Tiv+6okTkRMgFjeVmT70GHpvVxllDjibreBlRbrh45LTLvpTLPzteXV2zT3AWo\\nhQSN8BjamF2TMwwSzdHEZRPry3b8yVVUgnCnDiatxtEy1uJlvBzN204FiZpWYxwD\\nrkcRYVB7AgMBAAECggEAEYBQ3q/OWJfECkzOa2u9a7mswT7DW4YynUtoBMhoaOnX\\nxw/TU5undhDD4M2XvnMVqFcJDtGKAPbNZpO4x0MBejJgNJTdLGmlVC/yUlGDWvDv\\nIlMBZ8kIvay4XZ2HUEZRAJjxLbslqNu/LlN8s6vm2EXF2F7AKUzI+l7Jta/12RH8\\n0SYLzZ8ccfFiOeVxT3HvV0QcaawGh34pfcOi3U+kaMZVZefnGFis1tKYWZb2ZV5c\\nPpW3U3PDPjeCxIO9jgRZbOhBkhCQWa1oKsibx1U1dYPSfqq/UtRKf8gKv6u+BkLC\\nVdFqWoC+S4/Wk7OPkdWfd28YZwF+kDhyQREchR2AmQKBgQD558pXfuh/Zpwx0H+D\\nifHTGmZFxcvjkbWQ0jEtBtNeQLOGgR8t3pQ7XQADcUAUBQ2lGR5sbP6lEgsMP35B\\nY3w7nybFkWNEtEEUqCLKoGm1O0HiSh4v2W4WBxt9ynJ4vASzNRh04dG8aVHyG8uI\\n30W2J0m0dRb1ZasKt+6Lguy3iQKBgQC3xcsLJ10I14rJQQhmcilF59QYT5TSoPuF\\nv9L1GdOhRCPXgr97R4/YEDzk/VgLyzMjwTYdr24Kdggsa9Gn8UQ8T1xGOTNN5GUS\\nqwammb2IkixWoPDnc9QokSk2XU8TRjPIR0OynpKmmLJeTDFbgu5kC7WAvCgGl0SN\\nHwJG2U+C4wKBgQCAvbptrMFVsKTSvNiUCSJ9YGJDm4xX5h6lRsNysMt/CNHzft1z\\nIfE3S8fP/i3GonvPC8uyi8v7efobCzKduQStKmYs7aM4J6xHWf7iaBVM+gQM8aXv\\nfJHL40l0WjDypdm+AKJixFrqN0+x7EPEdVFSb5b20kNLlF6zHOJVGNOeEQKBgAMI\\ntvN2MOkGdfogorzeQaQv0aadGb3ofn6UzizRwla1Q0o5lGO6qLtOeVLmg9+d+Tgr\\n5nLTBKQTksr49LsrFo9QWBuosholHS4TuMZjX2ez0huUCKYpmWUaEG4fWEDfNdem\\npY17ZLxvZPJ9m4sBPGJWdyaq9JY3RSB3VJhK2i81AoGBANwVq/2H0fo+JjlheEtb\\nWwg6HrPUtBWzOXV5qHyhbbFrA2jPQnN82Lty7UsjTTw2SDYic63OVZs6KL6AKnLW\\nFl1X6LEURQKI3KikgMtve39Xqpr/pz8ueMVGxRQ5FscpFyTfu7X9jy5aeVHwORr1\\nWzqlRmkCz4qghC1wiZYz/sk5\\n-----END PRIVATE KEY-----\"\r\n                }\r\n            }\r\n        }\r\n    }\r\n}",
							"options": {
								"raw": {}
							}
						},
						"url": {
							"raw": "https://{{bigip1}}:{{mgmt_port}}/mgmt/shared/appsvcs/declare",
							"protocol": "https",
							"host": [
								"{{bigip1}}"
							],
							"port": "{{mgmt_port}}",
							"path": [
								"mgmt",
								"shared",
								"appsvcs",
								"declare"
							]
						}
					},
					"response": []
				},
				{
					"name": "Step 5b: AS3 - HTTPS App + SSL Cert + Decl WAF Policy + iRules",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "a4da1ae5-cea8-48aa-b803-b45a0086508a",
								"exec": [
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "X-F5-Auth-Token",
								"value": "{{bigip_1_auth_token}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\r\n    \"class\": \"AS3\",\r\n    \"action\": \"deploy\",\r\n    \"persist\": true,\r\n    \"declaration\": {\r\n        \"class\": \"ADC\",\r\n        \"schemaVersion\": \"3.10.0\",\r\n        \"id\": \"lmnop45678\",\r\n        \"label\": \"GoSmarter\",\r\n        \"remark\": \"HTTPS application with iRules & Declarative WAF Policy\",\r\n        \"controls\": {\r\n            \"trace\": true\r\n        },\r\n        \"ACME_tenant_04\": {\r\n            \"class\": \"Tenant\",\r\n            \"Application_04\": {\r\n                \"class\": \"Application\",\r\n                \"template\": \"generic\",\r\n                \"vs_https_waf\": {\r\n                    \"class\": \"Service_HTTPS\",\r\n                    \"virtualAddresses\": [\r\n                        \"10.1.10.246\"\r\n                    ],\r\n                    \"shareAddresses\": true,\r\n                    \"redirect80\": false,\r\n                    \"pool\": \"appsec_pool\",\r\n                    \"clientTLS\": \"backside_appsec\",\r\n                    \"serverTLS\": \"frontside_appsec\",\r\n                    \"virtualPort\": 443,\r\n                    \"securityLogProfiles\": [\r\n                    \t{\r\n                    \t\t\"bigip\": \"/Common/Log all requests\"\r\n                    \t}\r\n                    ],\r\n                    \"policyWAF\": {\r\n                    \t\"use\": \"AcmeWAF\"\r\n                    },\r\n\t\t\t\t\t\"profileStream\": {\r\n\t\t\t\t\t\t\"use\": \"streamProfile\"\r\n\t\t\t\t\t},\r\n                    \"iRules\": [\r\n                    \t\"iRule_InsertHeader\",\r\n                    \t\"iRule_CVE_2017_5638\"\r\n                    ]\r\n                },\r\n                \"appsec_pool\": {\r\n                    \"class\": \"Pool\",\r\n                    \"monitors\": [\r\n                        \"http\"\r\n                    ],\r\n                    \"members\": [\r\n                        {\r\n                            \"servicePort\": 8443,\r\n                            \"serverAddresses\": [\r\n                                \"10.1.10.80\"\r\n                            ],\r\n                            \"shareNodes\": true\r\n                        }\r\n                    ]\r\n                },\r\n\t\t\t\t\"iRule_InsertHeader\": {\r\n\t\t\t\t\t\"class\": \"iRule\",\r\n\t\t\t\t\t\"remark\": \"Insert headers to response\",\r\n\t\t\t\t\t\"iRule\": \"when HTTP_RESPONSE {\\nHTTP::header insert X-CustomHeader [IP::client_addr]\\n HTTP::header replace Server GOSMARTER\\n}\"\r\n\t\t\t\t},\r\n\t\t\t\t\"iRule_CVE_2017_5638\": {\r\n\t\t\t\t\t\"class\": \"iRule\",\r\n\t\t\t\t\t\"iRule\": {\r\n\t\t\t\t\t\t\"url\": \"https://raw.githubusercontent.com/cavalen/aolab-azure/master/files/CVE-2017-5638-ApacheStruts2.irule\"\r\n\t\t\t\t\t}\r\n\t\t\t\t},                \r\n                \"AcmeWAF\": {\r\n                \t\"class\": \"WAF_Policy\",\r\n                \t\"url\": \"https://raw.githubusercontent.com/cavalen/aolab-azure/master/files/waf_policy.json\",\r\n                \t\"ignoreChanges\": true\r\n                },\r\n                \"streamProfile\": {\r\n                \t\"class\": \"Stream_Profile\"\r\n                },\r\n\t\t\t\t\"frontside_appsec\": {\r\n\t\t\t\t\t\"class\": \"TLS_Server\",\r\n                    \"label\": \"simplest decl requires just cert\",\r\n\t\t\t\t\t\"certificates\": [\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\"certificate\": \"webcert_appsec\"\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t]\r\n\t\t\t\t},\r\n                \"backside_appsec\": {\r\n                    \"class\": \"TLS_Client\",\r\n                    \"label\": \"simplest decl requires just cert\",\r\n                     \"clientCertificate\": \"webcert_appsec\"\r\n                },\r\n                \"webcert_appsec\": {\r\n                    \"class\": \"Certificate\",\r\n                    \"remark\": \"in practice we recommend using a passphrase\",\r\n                    \"certificate\": \"-----BEGIN CERTIFICATE-----\\nMIIDIjCCAgqgAwIBAgIEEZ+6iTANBgkqhkiG9w0BAQsFADBTMQswCQYDVQQGEwJV\\nUzEUMBIGA1UEChMLRjUgTmV0d29ya3MxEjAQBgNVBAsTCUdvU21hcnRlcjEaMBgG\\nA1UEAxMRd2ViYXBwLmY1ZGVtby5jb20wHhcNMTkwNTE2MTMzMDQ5WhcNMjEwNTE1\\nMTMzMDQ5WjBTMQswCQYDVQQGEwJVUzEUMBIGA1UEChMLRjUgTmV0d29ya3MxEjAQ\\nBgNVBAsTCUdvU21hcnRlcjEaMBgGA1UEAxMRd2ViYXBwLmY1ZGVtby5jb20wggEi\\nMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQCzZcc48eMRCrI5QIOprcAInNGH\\nlBMSJACKTSGAaFBLXdzrqdkZC28zpDl7KfbplyNF1rGnkvZPbtPAD1mM39te81fe\\nFpz4cfIE5V+RUiufWnmS5Q/T5I2ct7VMLFJ51DTj6MR3ahA3ePwE1OW4OzNmMEDz\\noZr6u4WFlhh732Nm9vBJfxStULnqVx3Lga0J1GCW5aYMRBxXrU2+U4Tiv+6okTkR\\nMgFjeVmT70GHpvVxllDjibreBlRbrh45LTLvpTLPzteXV2zT3AWohQSN8BjamF2T\\nMwwSzdHEZRPry3b8yVVUgnCnDiatxtEy1uJlvBzN204FiZpWYxwDrkcRYVB7AgMB\\nAAEwDQYJKoZIhvcNAQELBQADggEBABG/4P+e/Tktlqj6sZP301SWv8zHrgx5iqHO\\nqQcud5ZdvepwpS2naXNK9TkarzYrmvt5MZEOg/pUhUkJaKYz1PlM4Hyt+Dpq0pAm\\nLQs8bKZ6n+rr3g3QnnVUXAwjnS37cg8+WdxJuqrhtTDGqutqePhodW6rX4I4ovW/\\n9CP1ffq0e1NVKPzhsXJkXSFv0uJX7nC7PdFFcwHYUnKmYZdWkIcY9SRvToayX8Sd\\nWKjAczPbt56cdZIVRMOpC+GKQaVc01uiCBhD5WlVCKZxR75BD6ulKQ540WnzDxKE\\nOsK93ESA8qcWZblWSuxbPObMaQfYbVzVmSfxGvsKZGktdq6geNo=\\n-----END CERTIFICATE-----\",\r\n                    \"privateKey\": \"-----BEGIN PRIVATE KEY-----\\nMIIEvgIBADANBgkqhkiG9w0BAQEFAASCBKgwggSkAgEAAoIBAQCzZcc48eMRCrI5\\nQIOprcAInNGHlBMSJACKTSGAaFBLXdzrqdkZC28zpDl7KfbplyNF1rGnkvZPbtPA\\nD1mM39te81feFpz4cfIE5V+RUiufWnmS5Q/T5I2ct7VMLFJ51DTj6MR3ahA3ePwE\\n1OW4OzNmMEDzoZr6u4WFlhh732Nm9vBJfxStULnqVx3Lga0J1GCW5aYMRBxXrU2+\\nU4Tiv+6okTkRMgFjeVmT70GHpvVxllDjibreBlRbrh45LTLvpTLPzteXV2zT3AWo\\nhQSN8BjamF2TMwwSzdHEZRPry3b8yVVUgnCnDiatxtEy1uJlvBzN204FiZpWYxwD\\nrkcRYVB7AgMBAAECggEAEYBQ3q/OWJfECkzOa2u9a7mswT7DW4YynUtoBMhoaOnX\\nxw/TU5undhDD4M2XvnMVqFcJDtGKAPbNZpO4x0MBejJgNJTdLGmlVC/yUlGDWvDv\\nIlMBZ8kIvay4XZ2HUEZRAJjxLbslqNu/LlN8s6vm2EXF2F7AKUzI+l7Jta/12RH8\\n0SYLzZ8ccfFiOeVxT3HvV0QcaawGh34pfcOi3U+kaMZVZefnGFis1tKYWZb2ZV5c\\nPpW3U3PDPjeCxIO9jgRZbOhBkhCQWa1oKsibx1U1dYPSfqq/UtRKf8gKv6u+BkLC\\nVdFqWoC+S4/Wk7OPkdWfd28YZwF+kDhyQREchR2AmQKBgQD558pXfuh/Zpwx0H+D\\nifHTGmZFxcvjkbWQ0jEtBtNeQLOGgR8t3pQ7XQADcUAUBQ2lGR5sbP6lEgsMP35B\\nY3w7nybFkWNEtEEUqCLKoGm1O0HiSh4v2W4WBxt9ynJ4vASzNRh04dG8aVHyG8uI\\n30W2J0m0dRb1ZasKt+6Lguy3iQKBgQC3xcsLJ10I14rJQQhmcilF59QYT5TSoPuF\\nv9L1GdOhRCPXgr97R4/YEDzk/VgLyzMjwTYdr24Kdggsa9Gn8UQ8T1xGOTNN5GUS\\nqwammb2IkixWoPDnc9QokSk2XU8TRjPIR0OynpKmmLJeTDFbgu5kC7WAvCgGl0SN\\nHwJG2U+C4wKBgQCAvbptrMFVsKTSvNiUCSJ9YGJDm4xX5h6lRsNysMt/CNHzft1z\\nIfE3S8fP/i3GonvPC8uyi8v7efobCzKduQStKmYs7aM4J6xHWf7iaBVM+gQM8aXv\\nfJHL40l0WjDypdm+AKJixFrqN0+x7EPEdVFSb5b20kNLlF6zHOJVGNOeEQKBgAMI\\ntvN2MOkGdfogorzeQaQv0aadGb3ofn6UzizRwla1Q0o5lGO6qLtOeVLmg9+d+Tgr\\n5nLTBKQTksr49LsrFo9QWBuosholHS4TuMZjX2ez0huUCKYpmWUaEG4fWEDfNdem\\npY17ZLxvZPJ9m4sBPGJWdyaq9JY3RSB3VJhK2i81AoGBANwVq/2H0fo+JjlheEtb\\nWwg6HrPUtBWzOXV5qHyhbbFrA2jPQnN82Lty7UsjTTw2SDYic63OVZs6KL6AKnLW\\nFl1X6LEURQKI3KikgMtve39Xqpr/pz8ueMVGxRQ5FscpFyTfu7X9jy5aeVHwORr1\\nWzqlRmkCz4qghC1wiZYz/sk5\\n-----END PRIVATE KEY-----\"\r\n                }\r\n            }\r\n        }\r\n    }\r\n}",
							"options": {
								"raw": {}
							}
						},
						"url": {
							"raw": "https://{{bigip1}}:{{mgmt_port}}/mgmt/shared/appsvcs/declare",
							"protocol": "https",
							"host": [
								"{{bigip1}}"
							],
							"port": "{{mgmt_port}}",
							"path": [
								"mgmt",
								"shared",
								"appsvcs",
								"declare"
							]
						}
					},
					"response": []
				},
				{
					"name": "Step 5c: Remove Tenant",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "c44c557e-061e-45bd-b482-f06e5761ed7a",
								"exec": [
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "X-F5-Auth-Token",
								"value": "{{bigip_1_auth_token}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\r\n    \"class\": \"AS3\",\r\n    \"action\": \"deploy\",\r\n    \"persist\": true,\r\n    \"declaration\": {\r\n        \"class\": \"ADC\",\r\n        \"schemaVersion\": \"3.10.0\",\r\n        \"id\": \"lmnop12345\",\r\n        \"label\": \"GoSmarter\",\r\n        \"remark\": \"An HTTP and an HTTPS application\",\r\n        \"controls\": {\r\n            \"trace\": true\r\n        },\r\n        \"ACME_tenant_04\": {\r\n            \"class\": \"Tenant\"\r\n        }\r\n    }\r\n}",
							"options": {
								"raw": {}
							}
						},
						"url": {
							"raw": "https://{{bigip1}}:{{mgmt_port}}/mgmt/shared/appsvcs/declare",
							"protocol": "https",
							"host": [
								"{{bigip1}}"
							],
							"port": "{{mgmt_port}}",
							"path": [
								"mgmt",
								"shared",
								"appsvcs",
								"declare"
							]
						}
					},
					"response": []
				},
				{
					"name": "Step 6: AS3 All-in-one declaration",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "b96b2d9d-818f-49f0-a628-2d7f7a6e400a",
								"exec": [
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "X-F5-Auth-Token",
								"value": "{{bigip_1_auth_token}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\r\n   \"class\":\"AS3\",\r\n   \"action\":\"deploy\",\r\n   \"persist\":true,\r\n   \"declaration\":{\r\n      \"class\":\"ADC\",\r\n      \"schemaVersion\":\"3.10.0\",\r\n      \"id\":\"lmnop12345\",\r\n      \"label\":\"GoSmarter\",\r\n      \"remark\":\"All in one AS3 declaration\",\r\n      \"controls\":{\r\n         \"trace\":true\r\n      },\r\n      \"ACME_tenant_01\":{\r\n         \"class\":\"Tenant\",\r\n         \"Application1\":{\r\n            \"class\":\"Application\",\r\n            \"template\":\"generic\",\r\n            \"vs_App1_tenant1\":{\r\n               \"class\":\"Service_HTTP\",\r\n               \"virtualAddresses\":[\r\n                  \"10.1.10.246\"\r\n               ],\r\n               \"pool\":\"pool_app_tenant1\",\r\n               \"virtualPort\":8083,\r\n               \"shareAddresses\":true\r\n            },\r\n            \"pool_app_tenant1\":{\r\n               \"class\":\"Pool\",\r\n               \"monitors\":[\r\n                  \"http\",\r\n                  \"tcp\"\r\n               ],\r\n               \"members\":[\r\n                  {\r\n                     \"servicePort\":8083,\r\n                     \"serverAddresses\":[\r\n                        \"10.1.10.80\"\r\n                     ],\r\n                     \"shareNodes\":true\r\n                  }\r\n               ]\r\n            }\r\n         }\r\n      },\r\n      \"ACME_tenant_02\":{\r\n         \"class\":\"Tenant\",\r\n         \"Application2_http\":{\r\n            \"class\":\"Application\",\r\n            \"template\":\"generic\",\r\n            \"vs_App_http_tenant2\":{\r\n               \"class\":\"Service_HTTP\",\r\n               \"virtualAddresses\":[\r\n                  \"10.1.10.246\"\r\n               ],\r\n               \"pool\":\"pool_app_tenant2\",\r\n               \"virtualPort\":8082,\r\n               \"shareAddresses\":true\r\n            },\r\n            \"pool_app_tenant2\":{\r\n               \"class\":\"Pool\",\r\n               \"monitors\":[\r\n                  \"http\",\r\n                  \"tcp\"\r\n               ],\r\n               \"members\":[\r\n                  {\r\n                     \"servicePort\":8082,\r\n                     \"serverAddresses\":[\r\n                        \"10.1.10.80\"\r\n                     ],\r\n                     \"shareNodes\":true\r\n                  }\r\n               ]\r\n            }\r\n         },\r\n         \"Application2_tcp\":{\r\n            \"class\":\"Application\",\r\n            \"template\":\"generic\",\r\n            \"vs_App_tcp_tenant2\":{\r\n               \"class\":\"Service_TCP\",\r\n               \"virtualAddresses\":[\r\n                  \"10.1.10.246\"\r\n               ],\r\n               \"pool\":\"tcp_pool_tenant2\",\r\n               \"virtualPort\":22,\r\n               \"shareAddresses\": true\r\n            },\r\n            \"tcp_pool_tenant2\":{\r\n               \"class\":\"Pool\",\r\n               \"monitors\":[\r\n                  \"tcp\"\r\n               ],\r\n               \"members\":[\r\n                  {\r\n                     \"servicePort\":22,\r\n                     \"serverAddresses\":[\r\n                        \"10.1.10.80\"\r\n                     ],\r\n                     \"shareNodes\":true\r\n                  }\r\n               ]\r\n            }\r\n         }\r\n      },\r\n      \"ACME_tenant_03\":{\r\n         \"class\":\"Tenant\",\r\n         \"Application3_ssl_offload\":{\r\n            \"class\":\"Application\",\r\n            \"template\":\"generic\",\r\n            \"vs_SSL_Offload\":{\r\n               \"class\":\"Service_HTTPS\",\r\n               \"virtualAddresses\":[\r\n                  \"10.1.10.246\"\r\n               ],\r\n               \"pool\":\"pool_http_offload_tenant3\",\r\n               \"virtualPort\":8443,\r\n               \"shareAddresses\":true,\r\n               \"redirect80\": false,\r\n               \"serverTLS\":\"frontside\"\r\n            },\r\n            \"pool_http_offload_tenant3\":{\r\n               \"class\":\"Pool\",\r\n               \"monitors\":[\r\n                  \"http\",\r\n                  \"tcp\"\r\n               ],\r\n               \"members\":[\r\n                  {\r\n                     \"servicePort\":8080,\r\n                     \"serverAddresses\":[\r\n                        \"10.1.10.80\"\r\n                     ],\r\n                     \"shareNodes\":true\r\n                  }\r\n               ]\r\n            },\r\n            \"frontside\":{\r\n               \"class\":\"TLS_Server\",\r\n               \"label\":\"simplest decl requires just cert\",\r\n               \"certificates\":[\r\n                  {\r\n                     \"certificate\":\"webcert\"\r\n                  }\r\n               ]\r\n            },\r\n            \"webcert\":{\r\n               \"class\":\"Certificate\",\r\n               \"remark\":\"Existing Certificate\",\r\n               \"certificate\":{\r\n                  \"bigip\":\"/Common/default.crt\"\r\n               },\r\n               \"privateKey\":{\r\n                  \"bigip\":\"/Common/default.key\"\r\n               }\r\n            }\r\n         }\r\n      },\r\n      \"ACME_tenant_04\":{\r\n         \"class\":\"Tenant\",\r\n         \"Application_04\":{\r\n            \"class\":\"Application\",\r\n            \"template\":\"generic\",\r\n            \"vs_https_waf\":{\r\n               \"class\":\"Service_HTTPS\",\r\n               \"virtualAddresses\":[\r\n                  \"10.1.10.246\"\r\n               ],\r\n               \"shareAddresses\":true,\r\n               \"redirect80\":false,\r\n               \"pool\":\"appsec_pool\",\r\n               \"clientTLS\":\"backside_appsec\",\r\n               \"serverTLS\":\"frontside_appsec\",\r\n               \"virtualPort\":443,\r\n               \"securityLogProfiles\":[\r\n                  {\r\n                     \"bigip\":\"/Common/Log all requests\"\r\n                  }\r\n               ],\r\n               \"policyWAF\":{\r\n                  \"use\":\"AcmeWAF\"\r\n               },\r\n               \"profileStream\":{\r\n                  \"use\":\"streamProfile\"\r\n               },\r\n               \"iRules\":[\r\n                  \"iRule_InsertHeader\",\r\n                  \"iRule_CVE_2017_5638\"\r\n               ]\r\n            },\r\n            \"appsec_pool\":{\r\n               \"class\":\"Pool\",\r\n               \"monitors\":[\r\n                  \"http\"\r\n               ],\r\n               \"members\":[\r\n                  {\r\n                     \"servicePort\":8443,\r\n                     \"serverAddresses\":[\r\n                        \"10.1.10.80\"\r\n                     ],\r\n                     \"shareNodes\":true\r\n                  }\r\n               ]\r\n            },\r\n            \"iRule_InsertHeader\":{\r\n               \"class\":\"iRule\",\r\n               \"remark\":\"Insert headers to response\",\r\n               \"iRule\":\"when HTTP_RESPONSE {\\nHTTP::header insert X-CustomHeader [IP::client_addr]\\n HTTP::header replace Server GOSMARTER\\n}\"\r\n            },\r\n            \"iRule_CVE_2017_5638\":{\r\n               \"class\":\"iRule\",\r\n               \"iRule\":{\r\n                  \"url\":\"https://raw.githubusercontent.com/cavalen/aolab-azure/master/files/CVE-2017-5638-ApacheStruts2.irule\"\r\n               }\r\n            },\r\n            \"AcmeWAF\":{\r\n               \"class\":\"WAF_Policy\",\r\n               \"url\":\"https://raw.githubusercontent.com/cavalen/aolab-azure/master/files/waf_policy.json\",\r\n               \"ignoreChanges\":true\r\n            },\r\n            \"streamProfile\":{\r\n               \"class\":\"Stream_Profile\"\r\n            },\r\n            \"frontside_appsec\":{\r\n               \"class\":\"TLS_Server\",\r\n               \"label\":\"simplest decl requires just cert\",\r\n               \"certificates\":[\r\n                  {\r\n                     \"certificate\":\"webcert_appsec\"\r\n                  }\r\n               ]\r\n            },\r\n            \"backside_appsec\":{\r\n               \"class\":\"TLS_Client\",\r\n               \"label\":\"simplest decl requires just cert\",\r\n               \"clientCertificate\":\"webcert_appsec\"\r\n            },\r\n            \"webcert_appsec\":{\r\n               \"class\":\"Certificate\",\r\n               \"remark\":\"in practice we recommend using a passphrase\",\r\n               \"certificate\":\"-----BEGIN CERTIFICATE-----\\nMIIDIjCCAgqgAwIBAgIEEZ+6iTANBgkqhkiG9w0BAQsFADBTMQswCQYDVQQGEwJV\\nUzEUMBIGA1UEChMLRjUgTmV0d29ya3MxEjAQBgNVBAsTCUdvU21hcnRlcjEaMBgG\\nA1UEAxMRd2ViYXBwLmY1ZGVtby5jb20wHhcNMTkwNTE2MTMzMDQ5WhcNMjEwNTE1\\nMTMzMDQ5WjBTMQswCQYDVQQGEwJVUzEUMBIGA1UEChMLRjUgTmV0d29ya3MxEjAQ\\nBgNVBAsTCUdvU21hcnRlcjEaMBgGA1UEAxMRd2ViYXBwLmY1ZGVtby5jb20wggEi\\nMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQCzZcc48eMRCrI5QIOprcAInNGH\\nlBMSJACKTSGAaFBLXdzrqdkZC28zpDl7KfbplyNF1rGnkvZPbtPAD1mM39te81fe\\nFpz4cfIE5V+RUiufWnmS5Q/T5I2ct7VMLFJ51DTj6MR3ahA3ePwE1OW4OzNmMEDz\\noZr6u4WFlhh732Nm9vBJfxStULnqVx3Lga0J1GCW5aYMRBxXrU2+U4Tiv+6okTkR\\nMgFjeVmT70GHpvVxllDjibreBlRbrh45LTLvpTLPzteXV2zT3AWohQSN8BjamF2T\\nMwwSzdHEZRPry3b8yVVUgnCnDiatxtEy1uJlvBzN204FiZpWYxwDrkcRYVB7AgMB\\nAAEwDQYJKoZIhvcNAQELBQADggEBABG/4P+e/Tktlqj6sZP301SWv8zHrgx5iqHO\\nqQcud5ZdvepwpS2naXNK9TkarzYrmvt5MZEOg/pUhUkJaKYz1PlM4Hyt+Dpq0pAm\\nLQs8bKZ6n+rr3g3QnnVUXAwjnS37cg8+WdxJuqrhtTDGqutqePhodW6rX4I4ovW/\\n9CP1ffq0e1NVKPzhsXJkXSFv0uJX7nC7PdFFcwHYUnKmYZdWkIcY9SRvToayX8Sd\\nWKjAczPbt56cdZIVRMOpC+GKQaVc01uiCBhD5WlVCKZxR75BD6ulKQ540WnzDxKE\\nOsK93ESA8qcWZblWSuxbPObMaQfYbVzVmSfxGvsKZGktdq6geNo=\\n-----END CERTIFICATE-----\",\r\n               \"privateKey\":\"-----BEGIN PRIVATE KEY-----\\nMIIEvgIBADANBgkqhkiG9w0BAQEFAASCBKgwggSkAgEAAoIBAQCzZcc48eMRCrI5\\nQIOprcAInNGHlBMSJACKTSGAaFBLXdzrqdkZC28zpDl7KfbplyNF1rGnkvZPbtPA\\nD1mM39te81feFpz4cfIE5V+RUiufWnmS5Q/T5I2ct7VMLFJ51DTj6MR3ahA3ePwE\\n1OW4OzNmMEDzoZr6u4WFlhh732Nm9vBJfxStULnqVx3Lga0J1GCW5aYMRBxXrU2+\\nU4Tiv+6okTkRMgFjeVmT70GHpvVxllDjibreBlRbrh45LTLvpTLPzteXV2zT3AWo\\nhQSN8BjamF2TMwwSzdHEZRPry3b8yVVUgnCnDiatxtEy1uJlvBzN204FiZpWYxwD\\nrkcRYVB7AgMBAAECggEAEYBQ3q/OWJfECkzOa2u9a7mswT7DW4YynUtoBMhoaOnX\\nxw/TU5undhDD4M2XvnMVqFcJDtGKAPbNZpO4x0MBejJgNJTdLGmlVC/yUlGDWvDv\\nIlMBZ8kIvay4XZ2HUEZRAJjxLbslqNu/LlN8s6vm2EXF2F7AKUzI+l7Jta/12RH8\\n0SYLzZ8ccfFiOeVxT3HvV0QcaawGh34pfcOi3U+kaMZVZefnGFis1tKYWZb2ZV5c\\nPpW3U3PDPjeCxIO9jgRZbOhBkhCQWa1oKsibx1U1dYPSfqq/UtRKf8gKv6u+BkLC\\nVdFqWoC+S4/Wk7OPkdWfd28YZwF+kDhyQREchR2AmQKBgQD558pXfuh/Zpwx0H+D\\nifHTGmZFxcvjkbWQ0jEtBtNeQLOGgR8t3pQ7XQADcUAUBQ2lGR5sbP6lEgsMP35B\\nY3w7nybFkWNEtEEUqCLKoGm1O0HiSh4v2W4WBxt9ynJ4vASzNRh04dG8aVHyG8uI\\n30W2J0m0dRb1ZasKt+6Lguy3iQKBgQC3xcsLJ10I14rJQQhmcilF59QYT5TSoPuF\\nv9L1GdOhRCPXgr97R4/YEDzk/VgLyzMjwTYdr24Kdggsa9Gn8UQ8T1xGOTNN5GUS\\nqwammb2IkixWoPDnc9QokSk2XU8TRjPIR0OynpKmmLJeTDFbgu5kC7WAvCgGl0SN\\nHwJG2U+C4wKBgQCAvbptrMFVsKTSvNiUCSJ9YGJDm4xX5h6lRsNysMt/CNHzft1z\\nIfE3S8fP/i3GonvPC8uyi8v7efobCzKduQStKmYs7aM4J6xHWf7iaBVM+gQM8aXv\\nfJHL40l0WjDypdm+AKJixFrqN0+x7EPEdVFSb5b20kNLlF6zHOJVGNOeEQKBgAMI\\ntvN2MOkGdfogorzeQaQv0aadGb3ofn6UzizRwla1Q0o5lGO6qLtOeVLmg9+d+Tgr\\n5nLTBKQTksr49LsrFo9QWBuosholHS4TuMZjX2ez0huUCKYpmWUaEG4fWEDfNdem\\npY17ZLxvZPJ9m4sBPGJWdyaq9JY3RSB3VJhK2i81AoGBANwVq/2H0fo+JjlheEtb\\nWwg6HrPUtBWzOXV5qHyhbbFrA2jPQnN82Lty7UsjTTw2SDYic63OVZs6KL6AKnLW\\nFl1X6LEURQKI3KikgMtve39Xqpr/pz8ueMVGxRQ5FscpFyTfu7X9jy5aeVHwORr1\\nWzqlRmkCz4qghC1wiZYz/sk5\\n-----END PRIVATE KEY-----\"\r\n            }\r\n         }\r\n      }\r\n   }\r\n}",
							"options": {
								"raw": {}
							}
						},
						"url": {
							"raw": "https://{{bigip1}}:{{mgmt_port}}/mgmt/shared/appsvcs/declare",
							"protocol": "https",
							"host": [
								"{{bigip1}}"
							],
							"port": "{{mgmt_port}}",
							"path": [
								"mgmt",
								"shared",
								"appsvcs",
								"declare"
							]
						}
					},
					"response": []
				},
				{
					"name": "Step 7: Get AS3 Configurations",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "72146941-5edf-430b-b687-8e6c3e0b5ecd",
								"exec": [
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "X-F5-Auth-Token",
								"value": "{{bigip_1_auth_token}}"
							},
							{
								"key": "Connection",
								"value": "keep-alive"
							}
						],
						"url": {
							"raw": "https://{{bigip1}}:{{mgmt_port}}/mgmt/shared/appsvcs/declare",
							"protocol": "https",
							"host": [
								"{{bigip1}}"
							],
							"port": "{{mgmt_port}}",
							"path": [
								"mgmt",
								"shared",
								"appsvcs",
								"declare"
							]
						}
					},
					"response": []
				},
				{
					"name": "Step 8: Remove all AS3 App Services",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "a4da1ae5-cea8-48aa-b803-b45a0086508a",
								"exec": [
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "DELETE",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "X-F5-Auth-Token",
								"value": "{{bigip_1_auth_token}}"
							}
						],
						"url": {
							"raw": "https://{{bigip1}}:{{mgmt_port}}/mgmt/shared/appsvcs/declare",
							"protocol": "https",
							"host": [
								"{{bigip1}}"
							],
							"port": "{{mgmt_port}}",
							"path": [
								"mgmt",
								"shared",
								"appsvcs",
								"declare"
							]
						}
					},
					"response": []
				}
			],
			"protocolProfileBehavior": {}
		},
		{
			"name": "Lab 4 - Telemetry Streaming (TS)",
			"item": [
				{
					"name": "Step 1: Get TS Version Info",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "83e5cd35-163b-4a53-aff7-3c4b9d31e10e",
								"exec": [
									"eval(postman.getGlobalVariable(\"_f5_workflow_functions\"));",
									"",
									"var check_vals = [",
									"        { ",
									"            \"path\":\"version\",",
									"            \"value\":\"/^1./i\",",
									"            \"op\":\"regex\"",
									"        }       ",
									"    ];",
									"",
									"f5_check_response(check_vals);",
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "X-F5-Auth-Token",
								"value": "{{bigip_1_auth_token}}"
							},
							{
								"key": "Connection",
								"value": "keep-alive"
							}
						],
						"url": {
							"raw": "https://{{bigip1}}:{{mgmt_port}}/mgmt/shared/telemetry/info",
							"protocol": "https",
							"host": [
								"{{bigip1}}"
							],
							"port": "{{mgmt_port}}",
							"path": [
								"mgmt",
								"shared",
								"telemetry",
								"info"
							]
						}
					},
					"response": []
				},
				{
					"name": "Step 2: TS Declaration BIG-IP - Kafka",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "a4da1ae5-cea8-48aa-b803-b45a0086508a",
								"exec": [
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "X-F5-Auth-Token",
								"value": "{{bigip_1_auth_token}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"$schema\": \"https://raw.githubusercontent.com/F5Networks/f5-telemetry-streaming/master/src/nodejs/schema/base_schema.json\",\n    \"class\": \"Telemetry\",\n    \"controls\": {\n        \"class\": \"Controls\",\n        \"logLevel\": \"info\"\n    },\n    \"My_Poller\": {\n        \"class\": \"Telemetry_System_Poller\",\n        \"interval\": 60\n    },\n    \"My_Listener\": {\n        \"class\": \"Telemetry_Listener\",\n        \"port\": 6514\n    },\n    \"My_Consumer\": {\n        \"class\": \"Telemetry_Consumer\",\n        \"type\": \"Kafka\",\n        \"host\": \"10.1.10.80\",\n        \"protocol\": \"binaryTcp\",\n        \"port\": 9092,\n        \"topic\": \"f5-telemetry\"\n    }\n}",
							"options": {
								"raw": {}
							}
						},
						"url": {
							"raw": "https://{{bigip1}}:{{mgmt_port}}/mgmt/shared/telemetry/declare",
							"protocol": "https",
							"host": [
								"{{bigip1}}"
							],
							"port": "{{mgmt_port}}",
							"path": [
								"mgmt",
								"shared",
								"telemetry",
								"declare"
							]
						},
						"description": "Cambiar el puerto de 9092 al que asigne Docker"
					},
					"response": []
				},
				{
					"name": "Step 3: Deploy AS3 App to test TS",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "72146941-5edf-430b-b687-8e6c3e0b5ecd",
								"exec": [
									"",
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "X-F5-Auth-Token",
								"value": "{{bigip_1_auth_token}}"
							},
							{
								"key": "Connection",
								"value": "keep-alive"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"class\": \"AS3\",\n    \"action\": \"deploy\",\n    \"persist\": true,\n    \"declaration\": {\n       \"class\": \"ADC\",\n       \"schemaVersion\": \"3.0.0\",\n       \"id\": \"lmnop23456\",\n       \"label\": \"GoSmarter\",\n       \"remark\": \"Generic HTTP applications w/ HSL Logging Pool\",\n       \"ACME_cloud_TS\": {\n          \"class\": \"Tenant\",\n          \"vs_Application_TS_8080\": {\n             \"class\": \"Application\",\n             \"template\": \"generic\",\n             \"vs_Application_TS_80\": {\n                \"class\": \"Service_HTTP\",\n                \"virtualAddresses\": [\n                   \"10.1.10.246\"\n                ],\n                \"pool\": \"web_pool_ts\",\n                \"profileTrafficLog\": {\n                    \"use\": \"telemetry_trafLogProf\"\n                },\n                \"virtualPort\": 8080,\n                \"shareAddresses\": true\n             },\n             \"web_pool_ts\": {\n                \"class\": \"Pool\",\n                \"monitors\": [\n                   \"http\"\n                ],\n                \"members\": [{\n                   \"servicePort\": 8080,\n                   \"serverAddresses\": [\n                      \"10.1.10.80\"\n                   ],\n                   \"shareNodes\": true\n                }]\n             },\n             \"telemetry_trafLogProf\": {\n                \"class\": \"Traffic_Log_Profile\",\n                \"requestSettings\": {\n                    \"requestEnabled\": true,\n                    \"proxyRespondOnLoggingErrorEnabled\": true,\n                    \"requestProtocol\": \"mds-tcp\",\n                    \"requestPool\": {\n                        \"use\": \"telemetry_HSLPool\"\n                    },\n                    \"requestTemplate\": \"event_source=\\\\\\\"request_logging\\\\\\\",hostname=\\\\\\\"$BIGIP_HOSTNAME\\\\\\\",client_ip=\\\\\\\"$CLIENT_IP\\\\\\\",server_ip=\\\\\\\"$SERVER_IP\\\\\\\",http_method=\\\\\\\"$HTTP_METHOD\\\\\\\",http_uri=\\\\\\\"$HTTP_URI\\\\\\\",virtual_name=\\\\\\\"$VIRTUAL_NAME\\\\\\\"\"\n                }\n            },\n            \"telemetry_HSLPool\": {\n                \"class\": \"Pool\",\n                \"monitors\": [\n                    \"tcp\"\n                ],\n                \"members\": [\n                    {\n                    \t\"enable\": true,\n                        \"serverAddresses\": [\n                            \"255.255.255.254\"\n                        ],\n                        \"servicePort\": 6514\n                    }\n                ]\n            },\n\t\t\t\"telemetry_local_rule\": {\n\t\t\t\t\"remark\": \"Only required when TS is a local listener\",\n\t\t\t\t\"class\": \"iRule\",\n\t\t\t\t\"iRule\": \"when CLIENT_ACCEPTED {\\n  node 127.0.0.1 6514\\n}\"\n    \t\t},\n    \t\t\"telemetry_local\": {\n    \t\t\t\"remark\": \"Only required when TS is a local listener\",\n    \t\t\t\"class\": \"Service_TCP\",\n    \t\t\t\"virtualAddresses\": [\n    \t\t\t\t\"255.255.255.254\"\n    \t\t\t],\n    \t\t\t\"virtualPort\": 6514,\n    \t\t\t\"iRules\": [\n    \t\t\t\t\"telemetry_local_rule\"\n    \t\t\t]\n    \t\t},\n    \t\t\"telemetry_hsl\": {\n    \t\t\t\"class\": \"Log_Destination\",\n    \t\t\t\"type\": \"remote-high-speed-log\",\n    \t\t\t\"protocol\": \"tcp\",\n    \t\t\t\"pool\": {\n    \t\t\t\t\"use\": \"telemetry_HSLPool\"\n    \t\t\t}\n    \t\t}\n          }\n       }\n    }\n}",
							"options": {
								"raw": {}
							}
						},
						"url": {
							"raw": "https://{{bigip1}}:{{mgmt_port}}/mgmt/shared/appsvcs/declare",
							"protocol": "https",
							"host": [
								"{{bigip1}}"
							],
							"port": "{{mgmt_port}}",
							"path": [
								"mgmt",
								"shared",
								"appsvcs",
								"declare"
							]
						}
					},
					"response": []
				},
				{
					"name": "Step 4: Delete TS Configuration",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "X-F5-Auth-Token",
								"value": "{{bigip_1_auth_token}}",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\r\n  \"class\": \"Telemetry\"\r\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "https://{{bigip1}}:{{mgmt_port}}/mgmt/shared/telemetry/declare",
							"protocol": "https",
							"host": [
								"{{bigip1}}"
							],
							"port": "{{mgmt_port}}",
							"path": [
								"mgmt",
								"shared",
								"telemetry",
								"declare"
							]
						}
					},
					"response": []
				}
			],
			"event": [
				{
					"listen": "prerequest",
					"script": {
						"id": "6d75e112-93b6-45bb-b6f6-3a70d6724a0a",
						"type": "text/javascript",
						"exec": [
							""
						]
					}
				},
				{
					"listen": "test",
					"script": {
						"id": "16cc20b4-c98c-4913-8670-65caacab136c",
						"type": "text/javascript",
						"exec": [
							""
						]
					}
				}
			],
			"protocolProfileBehavior": {}
		}
	],
	"auth": {
		"type": "basic",
		"basic": [
			{
				"key": "password",
				"value": "admin",
				"type": "string"
			},
			{
				"key": "username",
				"value": "admin",
				"type": "string"
			}
		]
	},
	"event": [
		{
			"listen": "prerequest",
			"script": {
				"id": "b41a6697-f0c3-42a4-b1b2-11ff7b27ed44",
				"type": "text/javascript",
				"exec": [
					""
				]
			}
		},
		{
			"listen": "test",
			"script": {
				"id": "d62f844a-0290-4b76-b178-01d7d2e13af3",
				"type": "text/javascript",
				"exec": [
					""
				]
			}
		}
	],
	"protocolProfileBehavior": {}
}
